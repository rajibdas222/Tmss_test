{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nexport default {\n  name: 'admin-post-page',\n  data: function () {\n    return {\n      post: {\n        title: '',\n        status: 'draft',\n        description: ''\n      },\n      errors: {\n        title: '',\n        status: '',\n        description: ''\n      },\n      status: ['publish', 'draft', 'private']\n    };\n  },\n  watch: {\n    'post.title': function (newTitle) {\n      this.errors.title = newTitle ? '' : 'Title is required';\n    },\n    'post.status': function (newStatus) {\n      this.errors.status = this.status.includes(newStatus) ? '' : 'Status is required';\n    },\n    'post.description': function (newDesc) {\n      this.errors.description = newDesc ? '' : 'Post description is required';\n    }\n  },\n  computed: {\n    isFormValid: function () {\n      let valid = true;\n      const self = this;\n\n      for (const [key, value] of Object.entries(self.errors)) {\n        if (self.post[key] == '' || value != '') {\n          valid = false;\n          break;\n        }\n      }\n\n      return valid;\n    }\n  },\n  mounted: function () {\n    this.show(this.$route.params.id);\n  },\n  methods: {\n    show: function (id) {\n      const self = this;\n      self.$store.commit('loading', true);\n      self.axios.get(self.$api_url + 'admin/posts/' + id + '/show', {\n        withCredentials: true\n      }).then(res => {\n        self.post = res.data;\n      }).catch(err => {\n        const message = err.response.data.message ? err.response.data.message : err.message;\n        self.$toast.error(message);\n        self.$router.push('/admin/posts');\n      }).finally(() => {\n        self.$store.commit('loading', false);\n      });\n    },\n    update: function (e, id) {\n      e.preventDefault();\n      const self = this;\n      if (self.isFormValid == false) return false;\n      self.$store.commit('loading', true);\n      self.axios.put(self.$api_url + 'admin/posts/' + id + '/update', self.post, {\n        withCredentials: true\n      }).then(res => {\n        self.$toast.success(res.data.message);\n      }).catch(err => {\n        const message = err.response.data.message ? err.response.data.message : err.message;\n        self.$toast.error(message);\n      }).finally(() => {\n        self.$store.commit('loading', false);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";AAyCA,eAAe;EACbA,IAAI,EAAE,iBADO;EAEbC,IAAI,EAAE,YAAU;IACd,OAAO;MACHC,IAAG,EAAI;QACHC,KAAI,EAAI,EADL;QAEHC,MAAK,EAAI,OAFN;QAGHC,WAAU,EAAI;MAHX,CADJ;MAMHC,MAAK,EAAI;QACLH,KAAI,EAAI,EADH;QAELC,MAAK,EAAI,EAFJ;QAGLC,WAAU,EAAI;MAHT,CANN;MAWHD,MAAK,EAAI,CAAC,SAAD,EAAY,OAAZ,EAAqB,SAArB;IAXN,CAAP;EAaD,CAhBY;EAiBbG,KAAK,EAAC;IACA,cAAc,UAASC,QAAT,EAAkB;MAC5B,KAAKF,MAAL,CAAYH,KAAZ,GAAqBK,QAAO,GAAI,EAAJ,GAAS,mBAArC;IACH,CAHD;IAIA,eAAe,UAASC,SAAT,EAAmB;MAC9B,KAAKH,MAAL,CAAYF,MAAZ,GAAsB,KAAKA,MAAL,CAAYM,QAAZ,CAAqBD,SAArB,IAAkC,EAAlC,GAAuC,oBAA7D;IACH,CAND;IAOA,oBAAoB,UAASE,OAAT,EAAiB;MACjC,KAAKL,MAAL,CAAYD,WAAZ,GAA2BM,OAAM,GAAI,EAAJ,GAAS,8BAA1C;IACH;EATD,CAjBO;EA4BbC,QAAQ,EAAC;IACHC,WAAW,EAAE,YAAU;MACnB,IAAIC,KAAI,GAAI,IAAZ;MACA,MAAMC,IAAG,GAAI,IAAb;;MACA,KAAK,MAAM,CAACC,GAAD,EAAMC,KAAN,CAAX,IAA2BC,MAAM,CAACC,OAAP,CAAeJ,IAAI,CAACT,MAApB,CAA3B,EAAwD;QACpD,IAAGS,IAAI,CAACb,IAAL,CAAUc,GAAV,KAAkB,EAAlB,IAAwBC,KAAI,IAAK,EAApC,EAAuC;UACnCH,KAAI,GAAI,KAAR;UACA;QACJ;MACJ;;MACA,OAAOA,KAAP;IACJ;EAXG,CA5BI;EAyCbM,OAAO,EAAE,YAAW;IAClB,KAAKC,IAAL,CAAU,KAAKC,MAAL,CAAYC,MAAZ,CAAmBC,EAA7B;EACD,CA3CY;EA4CbC,OAAM,EAAI;IAERJ,IAAI,EAAE,UAASG,EAAT,EAAY;MACd,MAAMT,IAAG,GAAI,IAAb;MACAA,IAAI,CAACW,MAAL,CAAYC,MAAZ,CAAmB,SAAnB,EAA8B,IAA9B;MACAZ,IAAI,CAACa,KAAL,CAAWC,GAAX,CAAed,IAAI,CAACe,QAAL,GAAgB,cAAhB,GAAiCN,EAAjC,GAAsC,OAArD,EAA8D;QAAEO,eAAe,EAAE;MAAnB,CAA9D,EACKC,IADL,CACUC,GAAE,IAAK;QACTlB,IAAI,CAACb,IAAL,GAAY+B,GAAG,CAAChC,IAAhB;MACH,CAHL,EAIKiC,KAJL,CAIWC,GAAE,IAAK;QACV,MAAMC,OAAM,GAAID,GAAG,CAACE,QAAJ,CAAapC,IAAb,CAAkBmC,OAAlB,GAA4BD,GAAG,CAACE,QAAJ,CAAapC,IAAb,CAAkBmC,OAA9C,GAAwDD,GAAG,CAACC,OAA5E;QACArB,IAAI,CAACuB,MAAL,CAAYC,KAAZ,CAAkBH,OAAlB;QACArB,IAAI,CAACyB,OAAL,CAAaC,IAAb,CAAkB,cAAlB;MACH,CARL,EASKC,OATL,CASa,MAAM;QACX3B,IAAI,CAACW,MAAL,CAAYC,MAAZ,CAAmB,SAAnB,EAA8B,KAA9B;MACH,CAXL;IAYH,CAjBO;IAmBRgB,MAAM,EAAE,UAASC,CAAT,EAAYpB,EAAZ,EAAe;MACnBoB,CAAC,CAACC,cAAF;MACA,MAAM9B,IAAG,GAAI,IAAb;MACA,IAAGA,IAAI,CAACF,WAAL,IAAoB,KAAvB,EACI,OAAO,KAAP;MAEJE,IAAI,CAACW,MAAL,CAAYC,MAAZ,CAAmB,SAAnB,EAA8B,IAA9B;MACAZ,IAAI,CAACa,KAAL,CAAWkB,GAAX,CAAe/B,IAAI,CAACe,QAAL,GAAgB,cAAhB,GAAiCN,EAAjC,GAAsC,SAArD,EAAgET,IAAI,CAACb,IAArE,EAA2E;QAAE6B,eAAe,EAAE;MAAnB,CAA3E,EACKC,IADL,CACUC,GAAE,IAAK;QACTlB,IAAI,CAACuB,MAAL,CAAYS,OAAZ,CAAoBd,GAAG,CAAChC,IAAJ,CAASmC,OAA7B;MACH,CAHL,EAIKF,KAJL,CAIWC,GAAE,IAAK;QACV,MAAMC,OAAM,GAAID,GAAG,CAACE,QAAJ,CAAapC,IAAb,CAAkBmC,OAAlB,GAA4BD,GAAG,CAACE,QAAJ,CAAapC,IAAb,CAAkBmC,OAA9C,GAAwDD,GAAG,CAACC,OAA5E;QACArB,IAAI,CAACuB,MAAL,CAAYC,KAAZ,CAAkBH,OAAlB;MACH,CAPL,EAQKM,OARL,CAQa,MAAM;QACX3B,IAAI,CAACW,MAAL,CAAYC,MAAZ,CAAmB,SAAnB,EAA8B,KAA9B;MACH,CAVL;IAWJ;EArCQ;AA5CG,CAAf","names":["name","data","post","title","status","description","errors","watch","newTitle","newStatus","includes","newDesc","computed","isFormValid","valid","self","key","value","Object","entries","mounted","show","$route","params","id","methods","$store","commit","axios","get","$api_url","withCredentials","then","res","catch","err","message","response","$toast","error","$router","push","finally","update","e","preventDefault","put","success"],"sourceRoot":"","sources":["D:\\wamp\\www\\vue_spa-master\\frontend\\src\\components\\pages\\admin\\post\\Update.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"page-title\">\n      <span>Update Post</span>\n    </div>\n\n    <div class=\"card\">\n      <div class=\"card-body\">\n          \n        <form v-on:submit=\"update($event, $route.params.id)\">\n            <div class=\"form-group\">\n                <label for=\"title\">Title <span class=\"text-danger\">*</span></label>\n                <input v-model=\"post.title\" type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"Post Title\">\n                <small class=\"form-text text-danger\">{{ errors.title }}</small>\n            </div>\n            <div class=\"form-group\">\n                <label for=\"description\">Description <span class=\"text-danger\">*</span></label>\n                <textarea v-model=\"post.description\" class=\"form-control\" id=\"description\" rows=\"5\" placeholder=\"Enter post description\"></textarea>\n                <small class=\"form-text text-danger\">{{ errors.description }}</small>\n            </div>\n            <div class=\"form-group mb-5\">\n                <label for=\"status\">Status <span class=\"text-danger\">*</span></label>\n                <select v-model=\"post.status\" class=\"form-control\" id=\"status\">\n                    <option v-for=\"(val, index) in status\" :value=\"val\" v-bind:key=\"index\">{{ val }}</option> \n                </select>\n                <small class=\"form-text text-danger\">{{ errors.status }}</small>\n            </div> \n            <div class=\"text-center my-3\">\n                <button type=\"button\" class=\"btn btn-default mr-3\" @click=\"$router.push('/admin/posts')\">Back</button>\n                <button type=\"submit\" class=\"btn btn-success\" :disabled=\"!isFormValid\">Update</button>\n            </div>            \n        </form>\n\n\n      </div>\n    </div>\n    \n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'admin-post-page',\n  data: function(){\n    return {\n        post : {\n            title : '',\n            status : 'draft',\n            description : ''\n        },\n        errors : {\n            title : '',\n            status : '',\n            description : ''\n        },\n        status : ['publish', 'draft', 'private']\n    }\n  },\n  watch:{\n        'post.title': function(newTitle){\n            this.errors.title =  newTitle ? '' : 'Title is required';                            \n        },\n        'post.status': function(newStatus){\n            this.errors.status =  this.status.includes(newStatus) ? '' : 'Status is required';                            \n        },\n        'post.description': function(newDesc){\n            this.errors.description =  newDesc ? '' : 'Post description is required';                            \n        },\n  },\n  computed:{\n        isFormValid: function(){\n            let valid = true;\n            const self = this;\n            for (const [key, value] of Object.entries(self.errors)) {\n                if(self.post[key] == '' || value != ''){\n                    valid = false;\n                    break;\n                }\n            }            \n            return valid;\n        }\n  },\n  mounted: function() {\n    this.show(this.$route.params.id);\n  },\n  methods : {\n\n    show: function(id){\n        const self = this;\n        self.$store.commit('loading', true);\n        self.axios.get(self.$api_url + 'admin/posts/' + id + '/show', { withCredentials: true,})\n            .then(res => {\n                self.post = res.data;\n            })\n            .catch(err => {                \n                const message = err.response.data.message ? err.response.data.message : err.message;\n                self.$toast.error(message);\n                self.$router.push('/admin/posts');\n            })\n            .finally(() => {\n                self.$store.commit('loading', false);\n            }); \n    },\n\n    update: function(e, id){\n        e.preventDefault();\n        const self = this;\n        if(self.isFormValid == false)\n            return false;\n\n        self.$store.commit('loading', true);\n        self.axios.put(self.$api_url + 'admin/posts/' + id + '/update', self.post, { withCredentials: true,})\n            .then(res => {\n                self.$toast.success(res.data.message);\n            })\n            .catch(err => {\n                const message = err.response.data.message ? err.response.data.message : err.message;\n                self.$toast.error(message);\n            })\n            .finally(() => {\n                self.$store.commit('loading', false);\n            });    \n    }\n\n  }\n}\n</script>"]},"metadata":{},"sourceType":"module"}