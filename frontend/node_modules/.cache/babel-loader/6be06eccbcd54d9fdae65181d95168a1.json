{"ast":null,"code":"export default {\n  name: 'auth-login',\n  data: function () {\n    return {\n      loading: false,\n      user: {\n        email: '',\n        password: '',\n        remember: false\n      },\n      errors: {\n        email: '',\n        password: ''\n      }\n    };\n  },\n  watch: {\n    'user.email': function (newEmail) {\n      let email_regex = /\\S+@\\S+\\.\\S+/;\n      if (newEmail == '') this.errors.email = 'Email address is required';else if (email_regex.test(newEmail) == false) this.errors.email = 'Email address is not valid';else this.errors.email = '';\n    },\n    'user.password': function (newPassword) {\n      if (newPassword == '') this.errors.password = 'Password is required';else if (newPassword.length < 6) this.errors.password = 'Password should be at least 6 characters';else this.errors.password = '';\n    }\n  },\n  computed: {\n    isFormValid: function () {\n      let valid = true;\n      const self = this;\n\n      for (const [key, value] of Object.entries(self.errors)) {\n        if (self.user[key] == '' || value != '') {\n          valid = false;\n          break;\n        }\n      }\n\n      return valid;\n    }\n  },\n  methods: {\n    login: function (e) {\n      e.preventDefault();\n      const self = this;\n      if (self.isFormValid == false) return false;\n      self.loading = true;\n      self.axios.post(self.$api_url + 'login', self.user, {\n        withCredentials: false\n      }).then(res => {\n        self.$store.commit('setAuth', res.data);\n        self.$router.push('/redirect');\n      }).catch(err => {\n        const message = err.response.data.message ? err.response.data.message : err.message;\n        self.$toast.error(message);\n      }).finally(() => {\n        self.loading = false;\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AA4CA,eAAe;EACbA,IAAI,EAAE,YADO;EAEbC,IAAI,EAAE,YAAU;IACd,OAAO;MACHC,OAAM,EAAI,KADP;MAEHC,IAAG,EAAI;QACHC,KAAI,EAAI,EADL;QAEHC,QAAO,EAAI,EAFR;QAGHC,QAAO,EAAI;MAHR,CAFJ;MAOHC,MAAK,EAAI;QACLH,KAAI,EAAI,EADH;QAELC,QAAO,EAAI;MAFN;IAPN,CAAP;EAYD,CAfY;EAgBbG,KAAK,EAAC;IACA,cAAc,UAASC,QAAT,EAAkB;MAC5B,IAAIC,WAAU,GAAI,cAAlB;MACA,IAAGD,QAAO,IAAK,EAAf,EACI,KAAKF,MAAL,CAAYH,KAAZ,GAAoB,2BAApB,CADJ,KAEK,IAAGM,WAAW,CAACC,IAAZ,CAAiBF,QAAjB,KAA8B,KAAjC,EACD,KAAKF,MAAL,CAAYH,KAAZ,GAAoB,4BAApB,CADC,KAGD,KAAKG,MAAL,CAAYH,KAAZ,GAAoB,EAApB;IACP,CATD;IAUA,iBAAiB,UAASQ,WAAT,EAAqB;MAClC,IAAGA,WAAU,IAAK,EAAlB,EACI,KAAKL,MAAL,CAAYF,QAAZ,GAAuB,sBAAvB,CADJ,KAEK,IAAGO,WAAW,CAACC,MAAZ,GAAqB,CAAxB,EACD,KAAKN,MAAL,CAAYF,QAAZ,GAAuB,0CAAvB,CADC,KAGD,KAAKE,MAAL,CAAYF,QAAZ,GAAuB,EAAvB;IACP;EAjBD,CAhBO;EAmCbS,QAAQ,EAAC;IACHC,WAAW,EAAE,YAAU;MACnB,IAAIC,KAAI,GAAI,IAAZ;MACA,MAAMC,IAAG,GAAI,IAAb;;MACA,KAAK,MAAM,CAACC,GAAD,EAAMC,KAAN,CAAX,IAA2BC,MAAM,CAACC,OAAP,CAAeJ,IAAI,CAACV,MAApB,CAA3B,EAAwD;QACpD,IAAGU,IAAI,CAACd,IAAL,CAAUe,GAAV,KAAkB,EAAlB,IAAwBC,KAAI,IAAK,EAApC,EAAuC;UACnCH,KAAI,GAAI,KAAR;UACA;QACJ;MACJ;;MACA,OAAOA,KAAP;IACJ;EAXG,CAnCI;EAgDbM,OAAO,EAAE;IACPC,KAAK,EAAE,UAASC,CAAT,EAAW;MACdA,CAAC,CAACC,cAAF;MACA,MAAMR,IAAG,GAAI,IAAb;MACA,IAAGA,IAAI,CAACF,WAAL,IAAoB,KAAvB,EACI,OAAO,KAAP;MAEJE,IAAI,CAACf,OAAL,GAAe,IAAf;MACAe,IAAI,CAACS,KAAL,CAAWC,IAAX,CAAgBV,IAAI,CAACW,QAAL,GAAgB,OAAhC,EAAyCX,IAAI,CAACd,IAA9C,EAAoD;QAAE0B,eAAe,EAAE;MAAnB,CAApD,EACKC,IADL,CACUC,GAAE,IAAK;QACTd,IAAI,CAACe,MAAL,CAAYC,MAAZ,CAAmB,SAAnB,EAA8BF,GAAG,CAAC9B,IAAlC;QACAgB,IAAI,CAACiB,OAAL,CAAaC,IAAb,CAAkB,WAAlB;MACH,CAJL,EAKKC,KALL,CAKWC,GAAE,IAAK;QACV,MAAMC,OAAM,GAAID,GAAG,CAACE,QAAJ,CAAatC,IAAb,CAAkBqC,OAAlB,GAA4BD,GAAG,CAACE,QAAJ,CAAatC,IAAb,CAAkBqC,OAA9C,GAAwDD,GAAG,CAACC,OAA5E;QACArB,IAAI,CAACuB,MAAL,CAAYC,KAAZ,CAAkBH,OAAlB;MACH,CARL,EASKI,OATL,CASa,MAAM;QACXzB,IAAI,CAACf,OAAL,GAAe,KAAf;MACH,CAXL;IAYJ;EApBO;AAhDI,CAAf","names":["name","data","loading","user","email","password","remember","errors","watch","newEmail","email_regex","test","newPassword","length","computed","isFormValid","valid","self","key","value","Object","entries","methods","login","e","preventDefault","axios","post","$api_url","withCredentials","then","res","$store","commit","$router","push","catch","err","message","response","$toast","error","finally"],"sourceRoot":"","sources":["D:\\wamp\\www\\vue_spa-master\\frontend\\src\\components\\auth\\Login.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"page-title\">\n      <span>Login</span>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-sm-4 offset-sm-4\">\n            <div class=\"card\">\n                <div class=\"card-body\">\n                    <form class=\"my-3\" @submit=\"login($event)\">\n\n                        <div class=\"form-group mb-4\">\n                            <div class=\"input-group\">\n                                <div class=\"input-group-prepend\">\n                                    <span class=\"input-group-text\"><i class=\"far fa-envelope\"></i></span>\n                                </div>\n                                <input v-model=\"user.email\" type=\"email\" class=\"form-control\" placeholder=\"Email address\" :readonly=\"loading\">                            \n                            </div>\n                            <small class=\"form-text text-danger\">{{ errors.email }}</small>\n                        </div>\n\n                        <div class=\"form-group mb-4\">\n                            <div class=\"input-group\">\n                                <div class=\"input-group-prepend\">\n                                    <span class=\"input-group-text\"><i class=\"fas fa-lock-open\"></i></span>\n                                </div>\n                                <input v-model=\"user.password\" type=\"password\" class=\"form-control\" placeholder=\"Password\" :readonly=\"loading\">                                \n                            </div>\n                            <small class=\"form-text text-danger\">{{ errors.password }}</small>\n                       </div>\n\n                        <div class=\"form-group text-center mt-3\">\n                            <button type=\"submit\" class=\"btn btn-success\" :disabled=\"!isFormValid || loading\">{{ loading ? 'Logging..' : 'Login' }}</button>\n                        </div>  \n\n                    </form>\n                </div>\n            </div>\n        </div>\n    </div>   \n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'auth-login',\n  data: function(){\n    return {\n        loading : false,\n        user : {\n            email : '',\n            password : '',\n            remember : false\n        },\n        errors : {\n            email : '',\n            password : ''\n        }\n    }\n  },\n  watch:{\n        'user.email': function(newEmail){\n            let email_regex = /\\S+@\\S+\\.\\S+/;\n            if(newEmail == '')\n                this.errors.email = 'Email address is required';\n            else if(email_regex.test(newEmail) == false)\n                this.errors.email = 'Email address is not valid'; \n            else\n                this.errors.email = '';             \n        },\n        'user.password': function(newPassword){\n            if(newPassword == '')\n                this.errors.password = 'Password is required';\n            else if(newPassword.length < 6)\n                this.errors.password = 'Password should be at least 6 characters'; \n            else\n                this.errors.password = '';             \n        },\n  },\n  computed:{\n        isFormValid: function(){\n            let valid = true;\n            const self = this;\n            for (const [key, value] of Object.entries(self.errors)) {\n                if(self.user[key] == '' || value != ''){\n                    valid = false;\n                    break;\n                }\n            }            \n            return valid;\n        }\n  },\n  methods: {\n    login: function(e){\n        e.preventDefault();\n        const self = this;\n        if(self.isFormValid == false)\n            return false;\n\n        self.loading = true;\n        self.axios.post(self.$api_url + 'login', self.user, { withCredentials: false,})\n            .then(res => {\n                self.$store.commit('setAuth', res.data);\n                self.$router.push('/redirect');\n            })\n            .catch(err => {\n                const message = err.response.data.message ? err.response.data.message : err.message;\n                self.$toast.error(message);\n            })\n            .finally(() => {\n                self.loading = false;\n            });\n    }\n  }\n}\n</script>"]},"metadata":{},"sourceType":"module"}