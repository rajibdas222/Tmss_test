{"ast":null,"code":"export default {\n  name: 'department-create-page',\n  data: function () {\n    return {\n      result: {\n        gpa: '',\n        date: '',\n        student_id: ''\n      },\n      errors: {\n        gpa: '',\n        date: '',\n        student_id: ''\n      },\n      st_lists: []\n    };\n  },\n\n  mounted() {\n    const self = this;\n    self.axios.get(self.$api_url + '/st_list', self.st_lists, {\n      withCredentials: true\n    }).then(res => {\n      console.log(res);\n      self.dept_lists = res.data;\n    }).catch(err => {\n      const message = err.response.data.message ? err.response.data.message : err.message;\n      self.$toast.error(message);\n    }).finally(() => {\n      self.$store.commit('loading', false);\n    });\n  },\n\n  watch: {\n    'result.gpa': function (newGpa) {\n      this.errors.result = newGpa ? '' : 'GPA is required';\n    },\n    'result.date': function (newData) {\n      this.errors.result = newData ? '' : 'Date is required';\n    }\n  },\n  computed: {\n    isFormValid: function () {\n      let valid = true;\n      const self = this;\n\n      for (const [key, value] of Object.entries(self.errors)) {\n        if (self.result[key] == '' || value != '') {\n          valid = false;\n          break;\n        }\n      }\n\n      return valid;\n    }\n  },\n  methods: {\n    clear: function () {\n      this.result = {\n        gpa: '',\n        date: ''\n      };\n    },\n    create: function (e) {\n      e.preventDefault();\n      const self = this;\n      if (self.isFormValid == false) return false;\n      self.$store.commit('loading', true);\n      self.axios.post(self.$api_url + '/results', self.result, {\n        withCredentials: true\n      }).then(res => {\n        console.log(res);\n        self.$toast.success(res.data.message);\n        self.clear();\n        self.$router.push('/results');\n      }).catch(err => {\n        const message = err.response.data.message ? err.response.data.message : err.message;\n        self.$toast.error(message);\n      }).finally(() => {\n        self.$store.commit('loading', false);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["name","data","result","gpa","date","student_id","errors","st_lists","mounted","self","axios","get","$api_url","withCredentials","then","res","console","log","dept_lists","catch","err","message","response","$toast","error","finally","$store","commit","watch","newGpa","newData","computed","isFormValid","valid","key","value","Object","entries","methods","clear","create","e","preventDefault","post","success","$router","push"],"sourceRoot":"","sources":["C:\\Users\\RajibDas\\Desktop\\laravel+vue\\frontend\\src\\components\\pages\\results\\Create.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"page-title\">\r\n            <span>Create Result</span>\r\n        </div>\r\n        <div class=\"card\">\r\n            <div class=\"card-body\">\r\n\r\n                <form v-on:submit=\"create($event)\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"name\">Student id <span class=\"text-danger\">*</span></label>\r\n                        <select v-model=\"student.student_id\" class=\"form-select form-control\" name=\"student_id\" >\r\n                            <option selected>Select Student id</option>\r\n                            <option v-for=\"st_id in st_lists\" :key=\"st_id\"  :value=\"st_id.id\">{{st_id.id}}</option>\r\n                        </select>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <label for=\"gpa\">GPA <span class=\"text-danger\">*</span></label>\r\n                        <input v-model=\"student.gpa\" type=\"text\" class=\"form-control\" id=\"gpa\" >\r\n                        <small class=\"form-text text-danger\">{{ errors.gpa }}</small>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"date\">Date <span class=\"text-danger\">*</span></label>\r\n                        <input v-model=\"student.date\" type=\"text\" class=\"form-control\" id=\"date\" >\r\n                        <small class=\"form-text text-danger\">{{ errors.date }}</small>\r\n                    </div>\r\n\r\n                    <div class=\"text-center my-3\">\r\n                        <button type=\"button\" class=\"btn btn-default mr-3\" @click=\"$router.push('/students')\">Back</button>\r\n                        <button type=\"submit\" class=\"btn btn-success\" :disabled=\"!isFormValid\">Create</button>\r\n                    </div>\r\n                </form>\r\n\r\n\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: 'department-create-page',\r\n        data: function(){\r\n            return {\r\n                result : {\r\n                    gpa : '',\r\n                    date : '',\r\n                    student_id:''\r\n                },\r\n                errors : {\r\n                    gpa : '',\r\n                    date : '',\r\n                    student_id:''\r\n                },\r\n                st_lists:[]\r\n            }\r\n        },\r\n\r\n        mounted() {\r\n            const self = this;\r\n            self.axios.get(self.$api_url + '/st_list', self.st_lists, { withCredentials: true,})\r\n                .then(res => {\r\n                    console.log(res);\r\n                    self.dept_lists = res.data;\r\n                })\r\n                .catch(err => {\r\n                    const message = err.response.data.message ? err.response.data.message : err.message;\r\n                    self.$toast.error(message);\r\n                })\r\n                .finally(() => {\r\n                    self.$store.commit('loading', false);\r\n                });\r\n        },\r\n\r\n        watch:{\r\n            'result.gpa': function(newGpa){\r\n                this.errors.result =  newGpa ? '' : 'GPA is required';\r\n            },\r\n            'result.date': function(newData){\r\n                this.errors.result =  newData ? '' : 'Date is required';\r\n            },\r\n\r\n        },\r\n        computed:{\r\n            isFormValid: function(){\r\n                let valid = true;\r\n                const self = this;\r\n                for (const [key, value] of Object.entries(self.errors)) {\r\n                    if(self.result[key] == '' || value != ''){\r\n                        valid = false;\r\n                        break;\r\n                    }\r\n                }\r\n                return valid;\r\n            }\r\n        },\r\n        methods : {\r\n            clear: function(){\r\n                this.result = {\r\n                    gpa : '',\r\n                    date : '',\r\n                }\r\n            },\r\n            create: function(e){\r\n                e.preventDefault();\r\n                const self = this;\r\n                if(self.isFormValid == false)\r\n                    return false;\r\n\r\n                self.$store.commit('loading', true);\r\n                self.axios.post(self.$api_url + '/results', self.result, { withCredentials: true,})\r\n                    .then(res => {\r\n                        console.log(res);\r\n                        self.$toast.success(res.data.message);\r\n                        self.clear();\r\n                        self.$router.push('/results');\r\n                    })\r\n                    .catch(err => {\r\n                        const message = err.response.data.message ? err.response.data.message : err.message;\r\n                        self.$toast.error(message);\r\n                    })\r\n                    .finally(() => {\r\n                        self.$store.commit('loading', false);\r\n                    });\r\n            }\r\n\r\n        }\r\n    }\r\n</script>"]},"metadata":{},"sourceType":"module"}