{"ast":null,"code":"export default {\n  name: 'admin-post-page',\n  data: function () {\n    return {\n      posts: []\n    };\n  },\n  mounted: function () {\n    this.getPosts();\n  },\n  methods: {\n    getPosts: function () {\n      const self = this;\n      self.$store.commit('loading', true);\n      self.axios.get(self.$api_url + 'admin/posts', {\n        withCredentials: true\n      }).then(res => {\n        self.posts = res.data;\n      }).catch(err => {\n        const message = err.response.data.message ? err.response.data.message : err.message;\n        self.$toast.error(message);\n      }).finally(() => {\n        self.$store.commit('loading', false);\n      });\n    },\n    deletePost: function (id, index) {\n      if (confirm(\"Are you sure to delete operation?\") === false) return;\n      const self = this;\n      self.$store.commit('loading', true);\n      self.axios.delete(self.$api_url + 'admin/posts/' + id + '/delete', {\n        withCredentials: true\n      }).then(res => {\n        self.$toast.success(res.data.message);\n        self.posts.splice(index, 1);\n      }).catch(err => {\n        const message = err.response.data.message ? err.response.data.message : err.message;\n        self.$toast.error(message);\n      }).finally(() => {\n        self.$store.commit('loading', false);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AAwCA,eAAe;EACbA,IAAI,EAAE,iBADO;EAEbC,IAAI,EAAE,YAAU;IACd,OAAO;MACHC,KAAI,EAAI;IADL,CAAP;EAGD,CANY;EAObC,OAAM,EAAI,YAAU;IAClB,KAAKC,QAAL;EACD,CATY;EAUbC,OAAM,EAAI;IACRD,QAAQ,EAAE,YAAU;MAClB,MAAME,IAAG,GAAI,IAAb;MACAA,IAAI,CAACC,MAAL,CAAYC,MAAZ,CAAmB,SAAnB,EAA8B,IAA9B;MAEAF,IAAI,CAACG,KAAL,CAAWC,GAAX,CAAeJ,IAAI,CAACK,QAAL,GAAgB,aAA/B,EAA8C;QAAEC,eAAe,EAAE;MAAnB,CAA9C,EACKC,IADL,CACUC,GAAE,IAAK;QACTR,IAAI,CAACJ,KAAL,GAAaY,GAAG,CAACb,IAAjB;MACH,CAHL,EAIKc,KAJL,CAIWC,GAAE,IAAK;QACV,MAAMC,OAAM,GAAID,GAAG,CAACE,QAAJ,CAAajB,IAAb,CAAkBgB,OAAlB,GAA4BD,GAAG,CAACE,QAAJ,CAAajB,IAAb,CAAkBgB,OAA9C,GAAwDD,GAAG,CAACC,OAA5E;QACAX,IAAI,CAACa,MAAL,CAAYC,KAAZ,CAAkBH,OAAlB;MACH,CAPL,EAQKI,OARL,CAQa,MAAM;QACXf,IAAI,CAACC,MAAL,CAAYC,MAAZ,CAAmB,SAAnB,EAA8B,KAA9B;MACH,CAVL;IAWD,CAhBO;IAiBRc,UAAU,EAAE,UAASC,EAAT,EAAaC,KAAb,EAAmB;MAC3B,IAAGC,OAAO,CAAC,mCAAD,CAAP,KAAiD,KAApD,EACE;MAEF,MAAMnB,IAAG,GAAI,IAAb;MACAA,IAAI,CAACC,MAAL,CAAYC,MAAZ,CAAmB,SAAnB,EAA8B,IAA9B;MACAF,IAAI,CAACG,KAAL,CAAWiB,MAAX,CAAkBpB,IAAI,CAACK,QAAL,GAAgB,cAAhB,GAAiCY,EAAjC,GAAsC,SAAxD,EAAmE;QAAEX,eAAe,EAAE;MAAnB,CAAnE,EACKC,IADL,CACUC,GAAE,IAAK;QACTR,IAAI,CAACa,MAAL,CAAYQ,OAAZ,CAAoBb,GAAG,CAACb,IAAJ,CAASgB,OAA7B;QACAX,IAAI,CAACJ,KAAL,CAAW0B,MAAX,CAAkBJ,KAAlB,EAAwB,CAAxB;MACH,CAJL,EAKKT,KALL,CAKWC,GAAE,IAAK;QACV,MAAMC,OAAM,GAAID,GAAG,CAACE,QAAJ,CAAajB,IAAb,CAAkBgB,OAAlB,GAA4BD,GAAG,CAACE,QAAJ,CAAajB,IAAb,CAAkBgB,OAA9C,GAAwDD,GAAG,CAACC,OAA5E;QACAX,IAAI,CAACa,MAAL,CAAYC,KAAZ,CAAkBH,OAAlB;MACH,CARL,EASKI,OATL,CASa,MAAM;QACXf,IAAI,CAACC,MAAL,CAAYC,MAAZ,CAAmB,SAAnB,EAA8B,KAA9B;MACH,CAXL;IAYJ;EAnCQ;AAVG,CAAf","names":["name","data","posts","mounted","getPosts","methods","self","$store","commit","axios","get","$api_url","withCredentials","then","res","catch","err","message","response","$toast","error","finally","deletePost","id","index","confirm","delete","success","splice"],"sourceRoot":"","sources":["C:\\Users\\RajibDas\\Desktop\\laravel+vue\\frontend\\src\\components\\pages\\admin\\posts\\Index.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"page-title\">\n      <span>All Department</span>\n    </div>\n    <div class=\"text-right\">\n        <button type=\"button\" class=\"btn btn-success mb-3 btn-sm\" @click=\"$router.push('/admin/posts/create')\">New Post</button>\n     </div>\n    <div v-if=\"posts.length == 0\" class=\"card\">\n      <div class=\"card-body\">\n          <p>No posts are found</p>          \n      </div>\n    </div>\n\n    <table v-if=\"posts.length\" class=\"table table-bordered\">\n      <thead>\n        <tr>\n          <th scope=\"col\">ID</th>\n          <th scope=\"col\">Title</th>\n          <th scope=\"col\">Status</th>\n          <th scope=\"col\">Action</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"(post, index) in posts\" v-bind:key=\"index\">\n          <th scope=\"row\">{{ post.id }}</th>\n          <td>{{ post.title }}</td>\n          <td>{{ post.status }}</td>\n          <td>\n            <button @click=\"$router.push('/admin/posts/'+post.id+'/update')\" class=\"btn btn-warning btn-sm mr-2\">Edit</button>\n            <button @click=\"deletePost(post.id, index)\" class=\"btn btn-danger btn-sm\">Del</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    \n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'admin-post-page',\n  data: function(){\n    return {\n        posts : [],\n    }\n  },\n  mounted : function(){\n    this.getPosts();\n  },\n  methods : {\n    getPosts: function(){\n      const self = this;\n      self.$store.commit('loading', true);\n\n      self.axios.get(self.$api_url + 'admin/posts', { withCredentials: true,})\n          .then(res => {\n              self.posts = res.data;\n          })\n          .catch(err => {\n              const message = err.response.data.message ? err.response.data.message : err.message;\n              self.$toast.error(message);\n          })\n          .finally(() => {\n              self.$store.commit('loading', false);\n          });\n    },\n    deletePost: function(id, index){\n        if(confirm(\"Are you sure to delete operation?\") === false)\n          return;\n\n        const self = this;\n        self.$store.commit('loading', true);\n        self.axios.delete(self.$api_url + 'admin/posts/' + id + '/delete', { withCredentials: true,})\n            .then(res => {\n                self.$toast.success(res.data.message);\n                self.posts.splice(index,1);\n            })\n            .catch(err => {\n                const message = err.response.data.message ? err.response.data.message : err.message;\n                self.$toast.error(message);\n            })\n            .finally(() => {\n                self.$store.commit('loading', false);\n            });  \n    }\n\n  }\n}\n</script>"]},"metadata":{},"sourceType":"module"}